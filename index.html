<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>公告系統（免登入）</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
  background: radial-gradient(circle at top left, #0f0c29, #302b63, #24243e);
  margin:0; padding:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
}
.container {
  width:95%;
  max-width:550px;
  background: rgba(10,10,10,0.85);
  padding:30px;
  border-radius:20px;
  box-shadow: 0 0 40px rgba(0,255,255,0.3), 0 0 80px rgba(0,255,255,0.2);
  text-align:center;
  border:1px solid cyan;
}
h1 { font-size:28px; color:#00f7ff; margin-bottom:15px; text-shadow: 0 0 10px #00f7ff;}
p.desc { color:#a0e5ff; font-size:15px; margin-bottom:25px; }
label {
  display:block;
  font-weight:bold;
  margin-top:15px;
  text-align:left;
  font-size:16px;
  color:#0ff;
  text-shadow: 0 0 5px #0ff;
}
select,input[type="text"] {
  width:100%;
  padding:14px;
  margin-top:8px;
  border:2px solid #0ff;
  border-radius:12px;
  font-size:15px;
  background: rgba(0,0,0,0.3);
  color:#fff;
  box-shadow: 0 0 10px rgba(0,255,255,0.4);
  transition: all 0.3s ease;
}
select:focus,input[type="text"]:focus {
  border-color:#ff00ff;
  box-shadow: 0 0 15px #ff00ff, 0 0 25px rgba(255,0,255,0.2);
  outline:none;
  background: rgba(0,0,0,0.5);
}
input[type="button"] {
  width:100%;
  background: linear-gradient(90deg, #ff00ff, #00ffff);
  color:white;
  padding:16px;
  margin-top:25px;
  border:none;
  border-radius:14px;
  cursor:pointer;
  font-size:18px;
  font-weight:bold;
  letter-spacing:1px;
  box-shadow: 0 0 15px #ff00ff, 0 0 25px #00ffff;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
input[type="button"]:hover {
  transform: scale(1.05);
  box-shadow: 0 0 25px #ff00ff, 0 0 45px #00ffff;
}
.error-box {
  width:90%; max-width:420px;
  background: rgba(20,0,0,0.85);
  padding:25px;
  border-radius:18px;
  box-shadow: 0 0 25px #ff0000, 0 0 50px rgba(255,0,0,0.3);
  text-align:center;
  border:1px solid #ff0000;
}
.error-box h2 { color:#ff4c4c; font-size:22px; margin-bottom:15px; text-shadow: 0 0 10px #ff4c4c; }
.auth-btn {
  display:inline-block; margin-top:15px;
  padding:12px 22px;
  background: linear-gradient(90deg,#ff6a6a,#ff3d3d);
  color:#fff;
  font-size:16px;
  font-weight:bold;
  border-radius:10px;
  text-decoration:none;
  box-shadow: 0 0 10px #ff4c4c, 0 0 20px rgba(255,0,0,0.3);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.auth-btn:hover { transform: scale(1.08); box-shadow: 0 0 20px #ff4c4c, 0 0 40px rgba(255,0,0,0.3);}
</style>
</head>
<body>
<div id="app"></div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.addEventListener("DOMContentLoaded",()=>{
  const app=document.getElementById("app");
  const params=new URLSearchParams(window.location.search);
  const auth=params.get("auth");

  if(auth==="success"){
    showForm();
    history.replaceState({},document.title,window.location.pathname);
  }else if(auth==="error"){
    showError("❌ 錯誤","未經認證，禁止進入！");
  }else{
    showError("⚠️ 未授權","未經認證的帳號，請重新認證");
  }

  function showForm(){
    app.innerHTML=`
    <div class="container">
      <h1>公告系統（免登入）</h1>
      <p class="desc">據某人說只要是帥/美的人發送的訊息，會有神秘的事情發生！</p>
      <form>
        <label for="helper">請發送公告的人：</label>
        <select id="helper" name="helper">
          <option value="最帥的Hugo">Hugo</option>
          <option value="小黃☃">小黃☃</option>
          <option value="芋兔">芋兔</option>
          <option value="南極熊ᵃʷᵃ ∞ ت𖧀ఌ">南極熊ᵃʷᵃ ∞ ت𖧀ఌ</option>
          <option value="叛逆灬步行貓 Walking Cat 🚶🐱">叛逆灬步行貓 Walking Cat 🚶🐱</option>
          <option value="符符：）">符符：）</option>
        </select>
        <label for="task">請填寫公告主旨：</label>
        <input required type="text" id="task" name="task" maxlength="100">
        <label for="alert">請填寫公告內文：</label>
        <input required type="text" id="alert" name="alert" maxlength="100">
        <input type="button" value="提交" onclick="sendMessage()">
      </form>
    </div>`;
  }

  function showError(title,text){
    app.innerHTML=`
    <div class="error-box">
      <h2>${title}</h2>
      <p>${text}</p>
      <a href="https://auth.walking-cat.com" class="auth-btn">👉 由此處認證</a>
    </div>`;
  }
});

function getCurrentTime(){
  const now=new Date();
  const padZero=num=>(num<10?'0'+num:num);
  return `${now.getFullYear()}/${padZero(now.getMonth()+1)}/${padZero(now.getDate())} ${padZero(now.getHours())}:${padZero(now.getMinutes())}:${padZero(now.getSeconds())}`;
}

function sendMessage(){
  const selectValue=document.getElementById('helper').value;
  const inputValue=document.getElementById('task').value;
  const textValue=document.getElementById('alert').value;
  const currentTime=getCurrentTime();
  const webhookUrl='https://discord.com/api/webhooks/1233007060661174333/OGsn0vzu2GQj0zUNvm7tNPINTmK3TTtCePF8KGrtyR8wnnpHhY3uo2QvRzjRIZZxIyHk';
  const embed={
    title:'Hugo伺服器 公告 系統 - 公告時間：'+currentTime,
    description:`發送訊息者: ${selectValue}\n公告主旨: ${inputValue}\n公告內文: ${textValue}`,
    color:14423100
  };
  const message={ embeds:[embed] };
  fetch(webhookUrl,{ method:'POST', headers:{ 'Content-Type':'application/json' }, body:JSON.stringify(message) })
  .then(response=>{
    if(!response.ok){ Swal.fire({title:"送出失敗",icon:"error"}); }
    else{ Swal.fire({title:"送出成功",icon:"success"}); }
  }).catch(error=>console.error('Error:',error));
}
</script>
</body>
</html>
